# Dockerfile para Celery Worker
# Este arquivo é usado pelo container pneu-control-worker no Easypanel

FROM python:3.12-slim

WORKDIR /app

# Instala dependencias com retry para evitar falhas de rede
COPY requirements.txt .
RUN pip install --no-cache-dir --retries 3 --timeout 60 -r requirements.txt

# Copia codigo
COPY . .

# Comando de inicio - CELERY WORKER (não uvicorn!)
CMD ["celery", "-A", "app.tasks.celery_app", "worker", "--loglevel=info"]
